<% provide(:title, 'Edit Construction Table') %>

<p id="notice"><%= notice %></p>
<h1><%= link_to 'Construction Tables', dme_tables_path %> > Editing Construction Table</h1>

<%= render 'edit_navbar', :active => 'fields' %>

<table class="table table-striped table-bordered">
  <thead>
  <tr>
    <td style='width: 38px'></td>
    <td>Column Name</td>
    <td>Column Type</td>
    <td>Column Scale</td>
    <td>Column Limit</td>
    <td>Display Name</td>
    <td>Type</td>
    <td>Active</td>
    <td>Lookup</td>
    <td></td>
  </tr>
  </thead>
  <% @dme_table.dme_fields.order('sort_order asc').each do |f| %>
      <tr <%= 'class=error' if !f.active %>>
        <td>
          <%= link_to(image_tag("edit_32x32.png", :border => 0, :size => '16x16', :class => 'field_edit'), '#', :class => 'field_edit') %>
          <%= link_to(image_tag("save_32x32.png", :border => 0, :size => '16x16', :class => 'field_save'), '#', :class => 'field_save') %>
          <%= link_to(image_tag("cancel_16.png", :border => 0, :size => '16x16', :class => 'field_cancel'), '#', :class => 'field_cancel') %>
        </td>
        <td id="td_db_column_name">
          <span class="dme_field_label"><%= f.db_column_name %></span><input class="inline_edit" id="db_column_name" type="text"/>
        </td>
        <td><span class="dme_field_label"><%= f.db_type %></span><input class="inline_edit" id="db_type" type="text"/>
        </td>
        <td><span class="dme_field_label"><%= f.db_scale %></span><input class="inline_edit" id="db_scale" type="text"/>
        </td>
        <td><span class="dme_field_label"><%= f.db_limit %></span><input class="inline_edit" id="db_limit" type="text"/>
        </td>
        <td>
          <span class="dme_field_label"><%= f.display_name %></span><input class="inline_edit" id="display_name" type="text"/>
        </td>
        <td><span class="dme_field_label"><%= f.type %></span><input class="inline_edit" id="type" type="text"/></td>
        <td style='text-align: center'><%= image_tag('checkmark.png', :size => '16x16') if f.active? %></td>
        <td style='text-align: center'><%= image_tag('checkmark.png', :size => '16x16') if f.lookup? %></td>
        <td class='icon_16'>
          <%= link_to image_tag("trash_32x32.png", :border => 0, :size => '16x16'), f, method: :delete, data: {confirm: 'Are you are you want to delete <'+f.db_column_name+'>?'} unless f.active? %>
        </td>
      </tr>
  <% end %>
</table>